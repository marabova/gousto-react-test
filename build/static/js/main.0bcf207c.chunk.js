(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,r){e.exports=r(70)},64:function(e,t,r){},65:function(e,t,r){},66:function(e,t,r){},67:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){},70:function(e,t,r){"use strict";r.r(t);var a=r(1),o=r.n(a),c=r(32),n=r(18),s=r(9),i=r(28),u=r(36),l=r(37),d=r.n(l),p=r(7),g=r(17),h=r.n(g),m=r(22),E=r(23),f=r.n(E),C="https://api.gousto.co.uk/products/v2.0/categories",v="https://api.gousto.co.uk/products/v2.0/products?includes[]=categories&image_sizes[]=365",y={categories:[],selectedCategory:{},loading:!1,error:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,r=t.type,a=t.payload;switch(r){case"gousto/categories/GET_CATEGORIES_START":return Object(p.a)({},e,{loading:!0,error:!1});case"gousto/categories/GET_CATEGORIES_SUCCESS":return Object(p.a)({},e,a,{loading:!1,error:!1});case"gousto/categories/GET_CATEGORIES_ERROR":return Object(p.a)({},e,a,{loading:!1,error:!0});case"gousto/categories/SELECT_CATEGORY":return Object(p.a)({},e,{selectedCategory:e.categories.find(function(e){return e.id===a.categoryId})});default:return e}},T={products:[],filteredProducts:[],searchedProducts:[],loading:!1,error:!1},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0,r=t.type,a=t.payload;switch(r){case"gousto/products/GET_PRODUCTS_STARTED":return Object(p.a)({},e,{loading:!0,error:!1});case"gousto/products/GET_PRODUCTS_SUCCESS":return Object(p.a)({},e,a,{loading:!1,error:!1});case"gousto/products/GET_PRODUCTS_ERROR":return Object(p.a)({},e,{loading:!1,error:!0});case"gousto/products/FILTER_PRODUCTS_BY_CATEGORY":var o=e.products.filter(function(e){return e.categories.filter(function(e){return e.id===a.categoryId}).length>0});return Object(p.a)({},e,{filteredProducts:o,searchedProducts:[]});case"gousto/products/SEARCH_PRODUCTS_BY_TITLE":var c=e.filteredProducts.filter(function(e){return a.title?-1!==e.title.toLowerCase().search(a.title.toLowerCase()):e});return Object(p.a)({},e,{searchedProducts:c});default:return e}},b=Object(s.c)({categories:O,products:S}),w=d()(),_=[u.a,Object(i.routerMiddleware)(w)],R=s.d.apply(void 0,[s.a.apply(void 0,_)].concat([])),j=Object(s.e)(Object(i.connectRouter)(w)(b),{},R),P=(r(63),r(71)),N=r(38),k=r(12),G=r(13),A=r(15),D=r(14),I=r(16),x=r(72),U=(r(64),function(e){function t(){var e,r;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(r=Object(A.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(o)))).state={showCategories:!1},r.showCategoriesHandler=function(){r.setState(function(e){return{showCategories:!e.showCategories}})},r.onCategoryClick=function(e){r.props.onClick(e),r.showCategoriesHandler()},r}return Object(I.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this,t=this.state.showCategories,r=this.props.categories;return o.a.createElement("aside",{className:"col-sm-4"},o.a.createElement("nav",{className:"categories dropdown ".concat(t?"active":"")},o.a.createElement("button",{className:"btn dropdown-toggle",type:"button",onClick:this.showCategoriesHandler},"See categories"),o.a.createElement("ul",{className:"list-group dropdown-menu"},r.length>0&&r.map(function(t){return o.a.createElement("li",{className:"list-group-item",key:t.id},o.a.createElement(x.a,{exact:!0,to:"/".concat(t.id),onClick:function(){return e.onCategoryClick(t)}},t.title))}))))}}]),t}(a.Component)),L=(r(65),function(e){function t(){var e,r;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(r=Object(A.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(o)))).state={showDescription:!1},r.showDescriptionHandler=function(){r.setState(function(e){return{showDescription:!e.showDescription}})},r}return Object(I.a)(t,e),Object(G.a)(t,[{key:"render",value:function(){var e=this.state.showDescription;return o.a.createElement("div",{className:"card",onClick:this.showDescriptionHandler},o.a.createElement("div",{className:"card-header"},this.props.title),e&&o.a.createElement("div",{className:"card-body"},o.a.createElement("p",{className:"card-text"},this.props.description)))}}]),t}(a.Component)),Y=function(e){var t=e.products;return o.a.createElement("div",{className:"products"},o.a.createElement("h3",null,"Products"),o.a.createElement("ul",{className:"row products--list"},t&&t.length?t.map(function(e){return o.a.createElement("li",{className:"col-sm-12",key:e.id},o.a.createElement(L,{title:e.title,description:e.description}))}):o.a.createElement("li",{className:"col col-sm-6"},"No products")))},H=(r(66),function(e){var t=e.value,r=e.onChange;return o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",placeholder:"Search products here...",className:"form-control",value:t,onChange:r}))});H.defaultProps={value:"",onChange:function(){}};var B=H,V=(r(67),function(e){function t(){var e,r;Object(k.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(r=Object(A.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(o)))).state={searchValue:""},r.onCategoryClick=function(e){r.setState({searchValue:""}),r.props.selectCategory(e.id),r.props.filterProducts(e.id)},r.onInputChange=function(e){r.setState({searchValue:e.target.value}),r.props.searchProducts(e.target.value)},r}return Object(I.a)(t,e),Object(G.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchCategories(),this.props.fetchProducts()}},{key:"render",value:function(){var e=this.props.searchedProducts.length?this.props.searchedProducts:this.props.filteredProducts;return o.a.createElement("div",{className:"wrapper"},o.a.createElement("header",null,o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row align-items-center"},o.a.createElement("h1",{className:"col-sm-4"},"Gousto"),o.a.createElement("div",{className:"col-sm-8"},o.a.createElement(B,{value:this.state.searchValue,onChange:this.onInputChange}))))),o.a.createElement("section",{className:"content"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement(U,{categories:this.props.categories,onClick:this.onCategoryClick}),o.a.createElement("div",{className:"col-sm-8"},o.a.createElement(Y,{products:e}))))))}}]),t}(a.Component)),F=Object(n.connect)(function(e){return{categories:e.categories.categories,selectedCategory:e.categories.selectedCategory,filteredProducts:e.products.filteredProducts,searchedProducts:e.products.searchedProducts}},function(e){return{fetchCategories:function(){return e(function(){var e=Object(m.a)(h.a.mark(function e(t){var r,a,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"gousto/categories/GET_CATEGORIES_START"}),e.prev=1,e.next=4,f()(C);case 4:if(!((r=e.sent).status>=400)){e.next=7;break}throw new Error("Bad response from server");case 7:return e.next=9,r.json();case 9:a=e.sent,o=a.data,t({type:"gousto/categories/GET_CATEGORIES_SUCCESS",payload:{categories:o}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t({type:"gousto/categories/GET_CATEGORIES_SUCCESS",payload:{error:e.t0.message},error:!0});case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}())},fetchProducts:function(){return e(function(){var e=Object(m.a)(h.a.mark(function e(t){var r,a,o;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"gousto/products/GET_PRODUCTS_STARTED"}),e.prev=1,e.next=4,f()(v);case 4:if(!((r=e.sent).status>=400)){e.next=7;break}throw new Error("Bad response from server");case 7:return e.next=9,r.json();case 9:a=e.sent,o=a.data,t({type:"gousto/products/GET_PRODUCTS_SUCCESS",payload:{products:o}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t({type:"gousto/products/GET_PRODUCTS_ERROR",payload:{error:e.t0.message},error:!0});case 17:case"end":return e.stop()}},e,null,[[1,14]])}));return function(t){return e.apply(this,arguments)}}())},selectCategory:function(t){return e({type:"gousto/categories/SELECT_CATEGORY",payload:{categoryId:t}})},filterProducts:function(t){return e({type:"gousto/products/FILTER_PRODUCTS_BY_CATEGORY",payload:{categoryId:t}})},searchProducts:function(t){return e(function(e){return{type:"gousto/products/SEARCH_PRODUCTS_BY_TITLE",payload:{title:e}}}(t))}}})(V),J=(r(68),function(){return o.a.createElement(P.a,null,o.a.createElement("div",{className:"app"},o.a.createElement(N.a,{exact:!0,path:"/:categoryId?",component:F})))});r(69);Object(c.render)(o.a.createElement(n.Provider,{store:j},o.a.createElement(J,null)),document.querySelector("#root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.0bcf207c.chunk.js.map